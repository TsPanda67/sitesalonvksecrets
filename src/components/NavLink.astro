---
// src/components/NavLink.astro
export interface Props {
  href: string;
  class?: string; // Pour des classes custom additionnelles
}

const { href, class: customClasses } = Astro.props;
const currentPath = Astro.url.pathname;

// Gestion plus précise de l'état actif pour la page d'accueil
// et pour les pages qui commencent par le href (ex: /prestations/massage correspond à /prestations)
const isActive = href === '/' 
  ? currentPath === '/' 
  : currentPath === href || currentPath.startsWith(href + '/');

const baseClasses = "relative font-sans font-semibold text-base transition-colors duration-200 ease-in-out hover-lift block py-2";
// Couleurs de votre charte
const activeClasses = "text-primary-500 after:content-[''] after:absolute after:bottom-[2px] after:left-0 after:w-full after:h-[3px] after:bg-primary-500 after:rounded-full";
const inactiveClasses = "text-text-dark hover:text-primary-500";
---

<a 
  href={href} 
  class:list={[
    baseClasses, 
    isActive ? activeClasses : inactiveClasses,
    customClasses
  ]}
  aria-current={isActive ? "page" : undefined} {/* Accessibilité pour le lien actif */}
>
  <slot />
</a>